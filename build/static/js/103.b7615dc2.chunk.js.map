{"version":3,"file":"static/js/103.b7615dc2.chunk.js","mappings":"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","sources":["auth/UserProfile.jsx","components/ValidatedInput.jsx","../node_modules/@fortawesome/free-regular-svg-icons/faUser.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport {\r\n  Avatar,\r\n  Box,\r\n  Button,\r\n  Modal,\r\n  ModalBody,\r\n  ModalCloseButton,\r\n  ModalContent,\r\n  ModalHeader,\r\n  ModalOverlay,\r\n  Text,\r\n} from '@chakra-ui/react';\r\nimport { regular } from '@fortawesome/fontawesome-svg-core/import.macro';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport ValidatedInput from 'components/ValidatedInput';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { updateProfile } from './authSlice';\r\n\r\nexport default function EditProfile() {\r\n  const dispatch = useDispatch();\r\n  const navigator = useNavigate();\r\n  const location = useLocation();\r\n  const { userData } = useSelector((state) => state.auth);\r\n  const { control, handleSubmit, setValue } = useForm({\r\n    defaultValues: {\r\n      name: '',\r\n      avatarUrl: '',\r\n      bio: '',\r\n      email: '',\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setValue('name', userData.name);\r\n    setValue('avatarUrl', userData.avatarUrl);\r\n    setValue('bio', userData.bio);\r\n    setValue('email', userData.email);\r\n  }, [userData]);\r\n\r\n  const onClose = () => navigator(location.state?.backgroundLocation?.pathname || '/');\r\n\r\n  const onSubmit = (values) => {\r\n    dispatch(updateProfile({ ...userData, ...values, roles: userData.authorities }));\r\n  };\r\n\r\n  const formRules = {\r\n    name: {\r\n      required: 'Tên là bắt buộc',\r\n    },\r\n    avatarUrl: {\r\n      required: 'Ảnh đại diện là bắt buộc',\r\n    },\r\n    bio: {\r\n      required: 'Giới tính là bắt buộc',\r\n    },\r\n    email: {\r\n      required: 'Email là bắt buộc',\r\n      pattern: {\r\n        value:\r\n          /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n        message: 'Please enter a valid email',\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen onClose={onClose}>\r\n      <ModalOverlay />\r\n      <ModalContent>\r\n        <ModalCloseButton onClick={onClose} />\r\n        <ModalHeader>\r\n          <Text fontSize=\"2xl\" fontWeight=\"bold\">\r\n            <Avatar\r\n              bg=\"teal.500\"\r\n              color=\"whiteAlpha.900\"\r\n              icon={<FontAwesomeIcon icon={regular('user')} />}\r\n            />\r\n            &nbsp;Thông tin cá nhân\r\n          </Text>\r\n        </ModalHeader>\r\n        <ModalBody>\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              width: '700',\r\n              p: 2,\r\n            }}\r\n            as=\"form\"\r\n            onSubmit={handleSubmit(onSubmit)}\r\n          >\r\n            <ValidatedInput\r\n              control={control}\r\n              name=\"name\"\r\n              type=\"text\"\r\n              label=\"Tên người dùng\"\r\n              rules={formRules.name}\r\n            />\r\n\r\n            <ValidatedInput\r\n              control={control}\r\n              name=\"avatarUrl\"\r\n              type=\"text\"\r\n              label=\"Ảnh đại diện\"\r\n              rules={formRules.avatarUrl}\r\n            />\r\n\r\n            <ValidatedInput\r\n              control={control}\r\n              name=\"bio\"\r\n              type=\"text\"\r\n              label=\"Giới tính\"\r\n              rules={formRules.bio}\r\n            />\r\n\r\n            <Button type=\"submit\" width=\"100%\" mt={2}>\r\n              Đồng ý\r\n            </Button>\r\n          </Box>\r\n        </ModalBody>\r\n      </ModalContent>\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react';\nimport { FormControl, FormErrorMessage, FormLabel, Input, Textarea } from '@chakra-ui/react';\nimport { Controller } from 'react-hook-form';\n\nfunction InputComponent({ type, onChange, onBlur, value, innerRef }) {\n  switch (type) {\n    case 'textarea':\n      return <Textarea onChange={onChange} onBlur={onBlur} value={value} ref={innerRef} />;\n    default:\n      return <Input type={type} onChange={onChange} onBlur={onBlur} value={value} ref={innerRef} />;\n  }\n}\n\n/**\n * ValidatedInput is a wrapper around Input that adds validation\n *\n * @param {Object} props with the following properties:\n * - control: the control object from react-hook-form\n * - name: the name of the input\n * - type: the type of the input\n * - label: the label of the input\n * - rules: the rules for the input\n * @see https://react-hook-form.com/api/useform/register\n * @returns the Input with validation\n */\nexport default function ValidatedInput({ control, name, type, label, rules, sx }) {\n  return (\n    <Controller\n      name={name}\n      rules={rules}\n      control={control}\n      render={({ field: { onChange, onBlur, value, ref }, fieldState: { error } }) => (\n        <FormControl sx={sx} isInvalid={!!error}>\n          <FormLabel>{label}</FormLabel>\n          <InputComponent\n            type={type}\n            onChange={onChange}\n            onBlur={onBlur}\n            value={value}\n            innerRef={ref}\n          />\n          {error && <FormErrorMessage>{error?.message}</FormErrorMessage>}\n        </FormControl>\n      )}\n    />\n  );\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar prefix = 'far';\nvar iconName = 'user';\nvar width = 448;\nvar height = 512;\nvar aliases = [128100,62144];\nvar unicode = 'f007';\nvar svgPathData = 'M272 304h-96C78.8 304 0 382.8 0 480c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32C448 382.8 369.2 304 272 304zM48.99 464C56.89 400.9 110.8 352 176 352h96c65.16 0 119.1 48.95 127 112H48.99zM224 256c70.69 0 128-57.31 128-128c0-70.69-57.31-128-128-128S96 57.31 96 128C96 198.7 153.3 256 224 256zM224 48c44.11 0 80 35.89 80 80c0 44.11-35.89 80-80 80S144 172.1 144 128C144 83.89 179.9 48 224 48z';\n\nexports.definition = {\n  prefix: prefix,\n  iconName: iconName,\n  icon: [\n    width,\n    height,\n    aliases,\n    unicode,\n    svgPathData\n  ]};\n\nexports.faUser = exports.definition;\nexports.prefix = prefix;\nexports.iconName = iconName;\nexports.width = width;\nexports.height = height;\nexports.ligatures = aliases;\nexports.unicode = unicode;\nexports.svgPathData = svgPathData;\nexports.aliases = aliases;"],"names":["EditProfile","dispatch","useDispatch","navigator","useNavigate","location","useLocation","userData","useSelector","state","auth","useForm","defaultValues","name","avatarUrl","bio","email","control","handleSubmit","setValue","useEffect","onClose","backgroundLocation","pathname","formRules","required","pattern","value","message","isOpen","onClick","fontSize","fontWeight","bg","color","icon","sx","display","flexDirection","alignItems","gap","width","p","as","onSubmit","values","updateProfile","roles","authorities","type","label","rules","mt","InputComponent","onChange","onBlur","innerRef","ref","ValidatedInput","render","field","error","fieldState","isInvalid","iconName","aliases","unicode","svgPathData","exports","prefix"],"sourceRoot":""}